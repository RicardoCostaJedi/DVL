<!DOCTYPE html>
<html>
  <head>
    <title>DVL Random Walk</title>
    <link type="text/css"         href="../../css/smoothness/jquery-ui-1.8.7.custom.css" rel="Stylesheet" />	
    <script type="text/javascript" src="../../js/jquery-1.6.2.min.js"></script>
    <script type="text/javascript" src="../../js/jquery-ui-1.8.7.custom.js"></script>
    <script type="text/javascript" src="../../d3.js"></script>
    <script type="text/javascript" src="../../protovis-r3.2.js"></script>
    <script type="text/javascript" src="../../sprintf.js"></script>
    <script type="text/javascript" src="../../dvl.js"></script>
    <style type="text/css">

body {
  font: 12px sans-serif;
}

.background {
  fill: #ccc;
}

.lines {
  shape-rendering: crispEdges;
  stroke: white;
}

.line {
  stroke: red;
}

    </style>

  </head>
  <body>
    <button onclick="next()">GO</button>
    <div>
    </div>
  </body>
  <script type="text/javascript">
  
  i = 0;
  data = [];
  while(data.length < 4) {
    data.push(i);
    i++;
  }
    
  data = dvl.def(data);
  
  function next() {
    console.log('-------------------------');
    d = data.get();
    d.shift();
    d.push(i);
    i++;
    data.set(d.slice()).notify();  
  }
  
	var margin = dvl.def({ top: 30, bottom: 70, left: 70, right: 30 }, "margin");
  
  var panel = dvl.svg.canvas({
    selector:'body',
    width: 800,
    height: 300,
    margin:margin
  });
	
  var sx = dvl.scale.linear({
    name: "scale_x",
    domain: { data:data, sorted:true },
    rangeFrom: 0,
    rangeTo: panel.width,
    padding: 10
  })
  
  dvl.svg.lines({
    panel: panel,
    duration: 400,
    props: {
      key: dvl.gen.fromArray(data, null, function(d) { return 'k' + d; }),
      left: dvl.gen.fromArray(data, null, sx.scale),
      top1: 0,
      bottom2: 0
    }
  });
  

  </script>
</html>
